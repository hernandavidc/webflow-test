var G=Object.defineProperty,H=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var Y=(e,t,i)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,A=(e,t)=>{for(var i in t||(t={}))K.call(t,i)&&Y(e,i,t[i]);if(P)for(var i of P(t))X.call(t,i)&&Y(e,i,t[i]);return e},U=(e,t)=>H(e,W(t));import{d as v,o as c,b as d,l as Z,n as x,am as I,an as N,ae as D,g as S,j as w,w as j,i as s,h as o,q as g,ao as m,ac as O,s as F,t as y,ab as b,v as ee,ay as te,m as R,ap as M,k as L,r as k,e as $,ai as se,p as B,f as V}from"./vendor.c113d557.js";import{A as ne}from"./alertify.5e46eef9.js";import{_ as ie,M as le}from"./MatchOfferCard.a307fe28.js";import{S as J}from"./simplebar.0a9dea72.js";import{a as E}from"./index.981b3a53.js";import"./bootstrap.bundle.min.65351b1f.js";import"./moment.08a7f518.js";const C=v({props:{hideBorder:null},setup(e){return(t,i)=>(c(),d("div",{class:x(["py-3 position-relative",{"border-bottom":!e.hideBorder}])},[Z(t.$slots,"default")],2))}}),ae={class:"mb-2"},re={class:"fs-16 fw-bold"},oe={class:"btn btn-dropdown ps-3 text-start w-100",type:"button",id:"btn_remote","data-bs-toggle":"dropdown","aria-expanded":"false"},ce={class:"dropdown-menu w-100","aria-labelledby":"btn_remote"},ue=s("span",{class:"dropdown-item"},"Full remote",-1),de=[ue],pe=s("span",{class:"dropdown-item"},"Hybrid ",-1),he=[pe],fe=s("span",{class:"dropdown-item"},"Digital Nomad",-1),_e=[fe],ge={class:"mb-0"},ye=["onClick"],me=s("i",{class:"fas fa-times ms-1"},null,-1),be=v({emits:["updateApiQuery"],setup(e,{emit:t}){I();const i=N();let n=D([]);const p="remote";if(i.query.remote){let l=[];typeof i.query.remote=="string"?l.push(i.query.remote):l=i.query.remote,n.splice(0,0,...l)}const h=async l=>{let a=Object.assign({},i.query);n.indexOf(l)===-1?(n.push(l),a[p]=n.toString()):(n.splice(l,1),n.length==0?delete a[p]:a[p]=n.toString()),u()},f=l=>{let a=Object.assign({},i.query);const r=n.indexOf(l);n.splice(r,1),n.length==0?delete a[p]:a[p]=n.toString(),u()},u=async l=>{t("updateApiQuery",p,n)};return(l,a)=>{const r=S("t");return c(),w(C,null,{default:j(()=>[s("p",ae,[o(s("span",re,null,512),[[r,"searchEngine.filters.remote.title"]])]),o(s("button",oe,null,512),[[r,"searchEngine.filters.select"]]),s("ul",ce,[s("li",{class:"clickable",onClick:a[0]||(a[0]=_=>h("full_remote"))},de),s("li",{class:"clickable",onClick:a[1]||(a[1]=_=>h("hybrid"))},he),s("li",{class:"clickable",onClick:a[2]||(a[2]=_=>h("nomad"))},_e)]),o(s("p",ge,[(c(!0),d(b,null,O(m(n),(_,q)=>(c(),d("span",{class:"badge clickable rounded-pill fs-14 me-2 py-2 mt-2 bg-blue-app-20 text-blue-app",key:q,onClick:T=>f(_)},[F(y(_)+" ",1),me],8,ye))),128))],512),[[g,m(n).length!=0]])]),_:1})}}}),$e=v({data(){return{lang:"",search:"",awaitingSearch:!1,results:[],optionsActives:[[]],selectedOptionsActives:[],open:!1}},directives:{clickOutside:ee.directive,debounce:te.exports.getDirective("3")},props:{options:{type:Array,default:[]},values:{type:Array,default:[]},propertyToValidate:{type:String,default:"_id"},propertyName:{type:String,default:"name"},placeholder:{type:String,default:""},requestLevel:{type:Array,default:[]},replaceURL:{type:String,default:":id"},attrToReplaceRequestURL:{type:String,default:"_id"},searchURL:{type:String,default:"/locations/searchLocation/"},allItems:{type:Array,default:[]},allItemsSelectable:{type:Boolean,default:!1},saveObject:{type:Boolean,default:!1},closeOnSaveSearched:{type:Boolean,default:!1}},watch:{options:function(e){this.optionsActives[0]=e}},computed:U(A({},R("auth",["userData"])),{itemsList(){return this.optionsActives[this.level-1]},level(){return this.optionsActives.length},selectedOptionActive(){return this.level<=1?{}:this.selectedOptionsActives[this.level-2]}}),mounted(){this.lang=this.userData.language?this.userData.language:"en",Array.prototype.forEach.call(document.querySelectorAll(".custom-scroll"),e=>new J(e)),this.optionsActives[0]=this.options},methods:{openOptions(){this.open=!0},closeOptions(){this.open=!1},scrollToTop(){Array.prototype.forEach.call(document.querySelectorAll("#searchable-list__content-scroll .simplebar-content-wrapper"),e=>e.scrollTop=0)},validateClassOrder1(e){return this.allItems.includes(e[this.propertyName])||this.allItems.includes(e==null?void 0:e.name_en)||this.allItems.includes(e==null?void 0:e._id)},fetchResults(){this.axios.get(this.searchURL+this.search,{params:{lang:this.lang}}).then(e=>{this.results=(e==null?void 0:e.data)?e.data:[]}).then(()=>{Array.prototype.forEach.call(document.querySelectorAll(".searched-scroll"),e=>new J(e))})},validateSearchedItem(e,t){return this.results.length==1?this.values[this.values.length-1].includes(e[this.propertyToValidate].toString()):this.values[t].includes(e[this.propertyToValidate].toString())},closeSearchedList(){this.search="",this.results=[]},async clickItem(e){if(this.requestLevel.length>this.level-1){if(e.subMenu){const i=e.subMenu;this.optionsActives.push(i)}else{const i=this.requestLevel[this.level-1].replace(this.replaceURL,e[this.attrToReplaceRequestURL]);await this.axios.get(i,{params:{lang:this.lang}}).then(n=>{const p=n.data;this.optionsActives.push(p)})}let t=Object.assign({},e);delete t.subMenu,this.selectedOptionsActives.push(t),this.scrollToTop()}else this.saveData(e)},returnTitleName(e){return this.level<=1?this.returnNameItem(e):this.returnNameItem(this.selectedOptionActive)},returnNameItem(e){let t="";return e&&(e.hasOwnProperty(this.propertyName)?t=e[this.propertyName]:(e==null?void 0:e.name_fr)&&this.lang=="fr"?t=e.name_fr:(e==null?void 0:e.name_en)&&this.lang=="en"?t=e.name_en:(e==null?void 0:e.name_es)&&this.lang=="es"&&(t=e.name_es)),t},returnLevel(){this.optionsActives.pop(),this.selectedOptionsActives.pop()},saveData(e){let t=this.selectedOptionsActives;t.push(e),this.saveObject&&(t=e),this.$emit("selectOption",t)},saveSearched(e,t){this.closeOnSaveSearched&&this.closeSearchedList(),this.$emit("selectSearchedOption",e,t)}}}),ve={class:"searchable-list position-relative"},Se=["placeholder"],Oe={class:"position-absolute w-100 bg-white",style:{"z-index":"1"}},ke={key:0,class:"list-group searched-scroll",style:{height:"250px",overflow:"auto"}},qe=["onClick"],we={class:"ms-2 me-auto"},je=s("i",{class:"far fa-square"},null,-1),Ae=[je],Ce=s("i",{class:"fas fa-check-square"},null,-1),Le=[Ce],Ee=["id"],Te=s("span",{class:"ps-3 pe-2"},[s("i",{class:"far fa-angle-left"})],-1),Fe={class:"ms-2 me-auto"},Ie={key:0,class:"order-12 list-group-item d-flex justify-content-between align-items-start mb-1 border-0 bg-light-gray ps-1 clickable"},Ne=s("i",{class:"far fa-angle-left"},null,-1),De=[Ne],Qe=["onClick"],Ue={class:"ms-2 me-auto"},Re=s("i",{class:"far fa-square"},null,-1),xe=[Re],Me=s("i",{class:"fas fa-check-square"},null,-1),Be=[Me],Ve=["onClick"],Pe={class:"ms-2 me-auto"},Ye=s("i",{class:"far fa-square"},null,-1),Je=[Ye],ze=s("i",{class:"fas fa-check-square"},null,-1),Ge=[ze],He=s("i",{class:"far fa-angle-right"},null,-1),We=[He];function Ke(e,t,i,n,p,h){const f=S("debounce"),u=S("click-outside");return o((c(),d("div",ve,[o(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>e.search=l),class:"form-control searchable-list__input mb-1",placeholder:e.placeholder,onFocus:t[1]||(t[1]=(...l)=>e.openOptions&&e.openOptions(...l))},null,40,Se),[[M,e.search],[f,e.fetchResults,"1s"]]),o(s("div",Oe,[e.results.length!=0?(c(),d("ul",ke,[(c(!0),d(b,null,O(e.results,(l,a)=>(c(),d(b,{key:"results-"+a},[(c(!0),d(b,null,O(l,(r,_)=>o((c(),d("li",{class:"list-group-item d-flex justify-content-between align-items-start mb-1 border-0 bg-light-gray ps-1 clickable",key:`results-index${a}${_}`,onClick:q=>e.saveSearched(r,a)},[s("div",we,y(e.returnNameItem(r)),1),o(s("span",null,Ae,512),[[g,!e.validateSearchedItem(r,a)]]),o(s("span",null,Le,512),[[g,e.validateSearchedItem(r,a)]])],8,qe)),[[g,l]])),128))],64))),128))])):L("",!0)],512),[[g,e.results.length!=0],[u,e.closeSearchedList]]),s("div",{class:x(["searchable-list__options",{open:e.open}])},[s("ul",{id:e.open?"searchable-list__content-scroll":"",class:"list-group custom-scroll",style:{height:"100%",overflow:"auto"}},[e.open?(c(),d(b,{key:0},[e.allItems.length==0&&e.level>1?(c(),d("li",{key:0,class:"order-1 list-group-item d-flex justify-content-between align-items-start mb-1 border-0 bg-light-gray ps-1 clickable",onClick:t[2]||(t[2]=(...l)=>e.returnLevel&&e.returnLevel(...l))},[Te,s("div",Fe,y(e.returnNameItem(e.selectedOptionsActives[e.level-2])),1)])):L("",!0),(c(!0),d(b,null,O(e.itemsList,(l,a)=>(c(),d(b,{key:"list-"+a},[l&&e.validateClassOrder1(l)?(c(),d("li",Ie,[e.level>1?(c(),d("span",{key:0,class:"ps-3 pe-2",onClick:t[3]||(t[3]=(...r)=>e.returnLevel&&e.returnLevel(...r))},De)):L("",!0),s("div",{class:"d-flex flex-grow-1",onClick:r=>e.saveData(l)},[s("div",Ue,y(e.returnTitleName(l)),1),o(s("span",null,xe,512),[[g,e.allItemsSelectable&&!e.values[e.level-1].includes(l[e.propertyToValidate].toString())]]),o(s("span",null,Be,512),[[g,e.allItemsSelectable&&e.values[e.level-1].includes(l[e.propertyToValidate].toString())]])],8,Qe)])):l&&!e.validateClassOrder1(l)?(c(),d("li",{key:1,class:"order-1 list-group-item d-flex justify-content-between align-items-start mb-1 border-0 bg-light-gray ps-1 clickable",onClick:r=>e.clickItem(l)},[s("div",Pe,y(e.returnNameItem(l)),1),o(s("span",null,Je,512),[[g,e.requestLevel.length==e.level-1&&!e.values[e.level-1].includes(l[e.propertyToValidate].toString())]]),o(s("span",null,Ge,512),[[g,e.requestLevel.length==e.level-1&&e.values[e.level-1].includes(l[e.propertyToValidate].toString())]]),o(s("span",null,We,512),[[g,e.requestLevel.length!=e.level-1]])],8,Ve)):L("",!0)],64))),128))],64)):L("",!0)],8,Ee)],2)],512)),[[u,e.closeOptions]])}var Q=E($e,[["render",Ke]]);const Xe=v({components:{FilterLayout:C,SearchableList:Q},data(){return{options:[],filtersNames:[],filters:[]}},created(){if(this.axios.get("/locations/getContinents").then(e=>{this.options=e.data}),this.$route.query.locations){let e=[];typeof this.$route.query.locations=="string"?e.push(this.$route.query.locations):e=this.$route.query.locations,this.filters=this.filters.concat(e)}this.filters.length>0&&this.axios.get("/locations/by-ids",{params:{locations:this.filters}}).then(e=>{let t=[].concat(e.data.contients,e.data.countries,e.data.regions,e.data.cities);this.filtersNames=t})},methods:{async filter(e){let t=Object.assign({},this.$route.query);const i=this.filters.indexOf(e._id.toString());i===-1?(this.filters.push(e._id.toString()),t.locations=this.filters.toString(),this.filtersNames.push(e)):(this.filters.splice(i,1),this.filtersNames=this.filtersNames.filter(n=>n._id!=e._id&&n.property_name!=e.property_name),this.filters.length==0?delete t.locations:t.locations=this.filters.toString()),this.$emit("updateApiQuery","locations",this.filters)},save_data(e){const t=e.pop();this.filter(t)},save_searched_data(e){this.filter(e)},removeFilter(e){this.filter(e)}}}),Ze={class:"mb-2"},et={class:"fs-16 fw-bold"},tt={class:"mb-0"},st=["onClick"],nt=s("i",{class:"fas fa-times ms-1"},null,-1);function it(e,t,i,n,p,h){const f=k("SearchableList"),u=k("FilterLayout"),l=S("t");return c(),w(u,null,{default:j(()=>[s("p",Ze,[o(s("span",et,null,512),[[l,"searchEngine.filters.location.title"]])]),$(f,{options:e.options,requestLevel:["/locations/continent/:id/countries","/locations/country/:id/regions","/locations/region/:id/cities"],allItems:["Worldwide","All countries","All location_regions","All location_cities"],allItemsSelectable:!0,values:[e.filters,e.filters,e.filters,e.filters],placeholder:e.$t("searchEngine.filters.searchOrSelect"),closeOnSaveSearched:!1,onSelectOption:e.save_data,onSelectSearchedOption:e.save_searched_data},null,8,["options","values","placeholder","onSelectOption","onSelectSearchedOption"]),o(s("p",tt,[(c(!0),d(b,null,O(e.filtersNames,(a,r)=>(c(),d("span",{class:"badge clickable rounded-pill fs-14 me-2 py-2 mt-2 bg-blue-app-20 text-blue-app",key:"filter_remote-"+r,onClick:_=>e.removeFilter(a)},[F(y(a.name)+" ",1),nt],8,st))),128))],512),[[g,e.filtersNames.length!=0]])]),_:1})}var lt=E(Xe,[["render",it]]);const at=v({components:{FilterLayout:C,SearchableList:Q},data(){return{options:[],filter_name:"job_reference",filterObjs:[],job_reference:[],lang:"fr"}},created(){let e=window.localStorage.getItem("userLang");if(e?this.lang=window.localStorage.getItem("userLang"):(e=navigator.language,e.includes("es")?this.lang="es":e.includes("fr")?this.lang="fr":this.lang="en"),this.axios.get("/job-reference/categories").then(t=>{this.options=t.data}),this.$route.query.job_reference)if(typeof this.$route.query.job_reference=="string"){const t=[];t.push(this.$route.query.job_reference),this.job_reference=t}else this.job_reference=this.$route.query.job_reference;this.axios.get("/job-reference/by-ids",{params:{job_reference:this.job_reference}}).then(t=>{this.filterObjs=t.data})},methods:{async filter(e){let t=Object.assign({},this.$route.query);const i=this.job_reference.indexOf(e._id.toString());i===-1?(this.job_reference.push(e._id.toString()),t[this.filter_name]=this.job_reference.toString(),this.filterObjs.push(e)):(this.job_reference.splice(i,1),this.filterObjs=this.filterObjs.filter(n=>n._id!=e._id),this.job_reference.length==0?delete t[this.filter_name]:t[this.filter_name]=this.job_reference.toString()),this.$emit("updateApiQuery",this.filter_name,this.job_reference)}}}),rt={class:"mb-2"},ot={class:"fs-16 fw-bold"},ct={class:"mb-0"},ut=["onClick"],dt=s("i",{class:"fas fa-times ms-1"},null,-1);function pt(e,t,i,n,p,h){const f=k("SearchableList"),u=k("FilterLayout"),l=S("t");return c(),w(u,null,{default:j(()=>[s("p",rt,[o(s("span",ot,null,512),[[l,"searchEngine.filters.job_refence.title"]])]),$(f,{saveObject:!0,options:e.options,values:[[],[],e.job_reference],requestLevel:["/job-reference/subcategory/:id/categories","/job-reference/reference/:id/subcategory"],allItemsSelectable:!1,placeholder:e.$t("searchEngine.filters.searchOrSelect"),searchURL:"/job-reference/searchJobreference/",onSelectOption:e.filter,onSelectSearchedOption:e.filter},null,8,["options","values","placeholder","onSelectOption","onSelectSearchedOption"]),o(s("p",ct,[(c(!0),d(b,null,O(e.filterObjs,a=>(c(),d("span",{class:"badge clickable rounded-pill fs-14 me-2 py-2 mt-2 bg-blue-app-20 text-blue-app",key:"filter_JR-"+a._id,onClick:r=>e.filter(a)},[o(s("span",null,y(a.name_fr),513),[[g,e.lang=="fr"]]),o(s("span",null,y(a.name_en),513),[[g,e.lang=="en"]]),o(s("span",null,y(a.name_es),513),[[g,e.lang=="es"]]),dt],8,ut))),128))],512),[[g,e.filterObjs.length!=0]])]),_:1})}var ht=E(at,[["render",pt]]);const ft=v({components:{FilterLayout:C,SearchableList:Q},data(){return{options:[],filter_name:"industries",industries_objs:[],industries:[],lang:"fr"}},created(){if(this.$route.query.industries)if(typeof this.$route.query.industries=="string"){const t=[];t.push(this.$route.query.industries),this.industries=t}else this.industries=this.$route.query.industries;let e=window.localStorage.getItem("userLang");e?this.lang=window.localStorage.getItem("userLang"):(e=navigator.language,e.includes("es")?this.lang="es":e.includes("fr")?this.lang="fr":this.lang="en"),this.axios.get("/industry/categories").then(t=>{this.options=t.data}),this.axios.get("/industry/by-ids",{params:{industries:this.industries}}).then(t=>{this.industries_objs=t.data})},methods:{async filter(e){let t=Object.assign({},this.$route.query);const i=this.industries.indexOf(e._id.toString());i===-1?(this.industries.push(e._id.toString()),t[this.filter_name]=this.industries.toString(),this.industries_objs.push(e)):(this.industries.splice(i,1),this.industries_objs=this.industries_objs.filter(n=>n._id!=e._id),this.industries.length==0?delete t[this.filter_name]:t[this.filter_name]=this.industries.toString()),this.$emit("updateApiQuery",this.filter_name,this.industries)}}}),_t={class:"mb-2"},gt={class:"fs-16 fw-bold"},yt={class:"mb-0"},mt=["onClick"],bt=s("i",{class:"fas fa-times ms-1"},null,-1);function $t(e,t,i,n,p,h){const f=k("SearchableList"),u=k("FilterLayout"),l=S("t");return c(),w(u,null,{default:j(()=>[s("p",_t,[o(s("span",gt,null,512),[[l,"searchEngine.filters.industries.title"]])]),$(f,{options:e.options,values:[[],e.industries],requestLevel:["/industry/:id/categories"],allItems:["All Industries"],allItemsSelectable:!1,placeholder:e.$t("searchEngine.filters.searchOrSelect"),searchURL:"/industry/searchIndustries/",saveObject:!0,onSelectSearchedOption:e.filter,onSelectOption:e.filter},null,8,["options","values","placeholder","onSelectSearchedOption","onSelectOption"]),o(s("p",yt,[(c(!0),d(b,null,O(e.industries_objs,a=>(c(),d("span",{class:"badge clickable rounded-pill fs-14 me-2 py-2 mt-2 bg-blue-app-20 text-blue-app",key:"filter_industry-"+a._id,onClick:r=>e.filter(a)},[o(s("span",null,y(a.name_fr),513),[[g,e.lang=="fr"]]),o(s("span",null,y(a.name_en),513),[[g,e.lang=="en"]]),o(s("span",null,y(a.name_es),513),[[g,e.lang=="es"]]),bt],8,mt))),128))],512),[[g,e.industries_objs.length!=0]])]),_:1})}var vt=E(ft,[["render",$t]]);const St=v({components:{FilterLayout:C,SearchableList:Q},data(){return{options:[],filter_name:"companies",companies_objs:[],companies:[]}},created(){if(this.axios.get("/company/list/top").then(e=>{this.options=e.data}),this.$route.query.companies)if(typeof this.$route.query.companies=="string"){const e=[];e.push(this.$route.query.companies),this.companies=e}else this.companies=this.$route.query.companies;this.axios.get("/company/list/by-ids",{params:{companies:this.companies}}).then(e=>{this.companies_objs=e.data})},methods:{async filter(e){let t=Object.assign({},this.$route.query);const i=this.companies.indexOf(e._id.toString());i===-1?(this.companies.push(e._id.toString()),t[this.filter_name]=this.companies.toString(),this.companies_objs.push(e)):(this.companies.splice(i,1),this.companies_objs=this.companies_objs.filter(n=>n._id!=e._id),this.companies.length==0?delete t[this.filter_name]:t[this.filter_name]=this.companies.toString()),this.$emit("updateApiQuery",this.filter_name,this.companies)}}}),Ot={class:"mb-2"},kt={class:"fs-16 fw-bold"},qt={class:"mb-0"},wt=["onClick"],jt=s("i",{class:"fas fa-times ms-1"},null,-1);function At(e,t,i,n,p,h){const f=k("SearchableList"),u=k("FilterLayout"),l=S("t");return c(),w(u,null,{default:j(()=>[s("p",Ot,[o(s("span",kt,null,512),[[l,"searchEngine.filters.company.title"]])]),$(f,{saveObject:!0,options:e.options,requestLevel:[],allItems:[],allItemsSelectable:!1,values:[e.companies],placeholder:e.$t("searchEngine.filters.searchOrSelect"),closeOnSaveSearched:!1,onSelectOption:e.filter,onSelectSearchedOption:e.filter},null,8,["options","values","placeholder","onSelectOption","onSelectSearchedOption"]),o(s("p",qt,[(c(!0),d(b,null,O(e.companies_objs,a=>(c(),d("span",{class:"badge clickable rounded-pill fs-14 me-2 py-2 mt-2 bg-blue-app-20 text-blue-app",key:"filter_lang-"+a._id,onClick:r=>e.filter(a)},[F(y(a.name)+" ",1),jt],8,wt))),128))],512),[[g,e.companies_objs.length!=0]])]),_:1})}var Ct=E(St,[["render",At]]);const Lt={class:"mb-2"},Et={class:"fs-16 fw-bold"},Tt={class:"btn btn-dropdown ps-3 text-start w-100",type:"button",id:"btn_contract","data-bs-toggle":"dropdown","aria-expanded":"false"},Ft={class:"dropdown-menu w-100","aria-labelledby":"btn_contract"},It=["onClick"],Nt={class:"dropdown-item"},Dt={class:"mb-0"},Qt=["onClick"],Ut=F(),Rt=s("i",{class:"fas fa-times ms-1"},null,-1),xt=v({emits:["updateApiQuery"],setup(e,{emit:t}){I();const i=N();let n=D([]);const p=["CONTRACT_DEF","CONTRACT_INDEF","CONTRACT_FREE","CONTRACT_PART"],h="contract";if(i.query.contract){let a=[];typeof i.query.contract=="string"?a.push(i.query.contract):a=i.query.contract,n.splice(0,0,...a)}const f=async a=>{let r=Object.assign({},i.query);const _=n.indexOf(a);_===-1?(n.push(a),r[h]=n.toString()):(n.splice(_,1),n.length==0?delete r[h]:r[h]=n.toString()),l()},u=a=>{let r=Object.assign({},i.query);const _=n.indexOf(a);n.splice(_,1),n.length==0?delete r[h]:r[h]=n.toString(),l()},l=async a=>{t("updateApiQuery",h,n)};return(a,r)=>{const _=S("t");return c(),w(C,{id:"filter-contrat"},{default:j(()=>[s("p",Lt,[o(s("span",Et,null,512),[[_,"searchEngine.filters.contract.title"]])]),o(s("button",Tt,null,512),[[_,"searchEngine.filters.select"]]),s("ul",Ft,[(c(),d(b,null,O(p,q=>s("li",{class:"clickable",onClick:T=>f(q)},[o(s("span",Nt,null,512),[[_,`searchEngine.filters.contract.${q}`]])],8,It)),64))]),o(s("p",Dt,[(c(!0),d(b,null,O(m(n),(q,T)=>(c(),d("span",{class:"badge clickable rounded-pill fs-14 me-2 py-2 mt-2 bg-blue-app-20 text-blue-app",key:T,onClick:z=>u(q)},[o(s("span",null,null,512),[[_,`searchEngine.filters.contract.${q}`]]),Ut,Rt],8,Qt))),128))],512),[[g,m(n).length!=0]])]),_:1})}}}),Mt={class:"mb-2"},Bt={class:"fs-16 fw-bold"},Vt={class:"custom-scroll",style:{"max-height":"205px"}},Pt={class:"form-check mt-2"},Yt=["checked","id","value","onClick"],Jt=["for"],zt=v({emits:["updateApiQuery"],setup(e,{emit:t}){I();const i=N(),n=["long_remote_period","four_day_week","unlimited_paid_time_off","extra_paid_time_off","flex_working_hours","time_to_work_on_a_side_project","additional_parental_leave","open_to_slashing","open_to_long_term_freelancing","open_to_part-time","pet_friendly"];let p=D([]);const h="flexibility";if(i.query.flexibility){let u=[];typeof i.query.flexibility=="string"?u.push(i.query.flexibility):u=i.query.flexibility,p.splice(0,0,...u)}const f=async u=>{let l=Object.assign({},i.query);const a=p.indexOf(u);a===-1?(p.push(u),l[h]=p.toString()):(p.splice(a,1),p.length==0?delete l[h]:l[h]=p.toString()),t("updateApiQuery",h,p)};return(u,l)=>{const a=S("t");return c(),w(C,null,{default:j(()=>[s("p",Mt,[o(s("span",Bt,null,512),[[a,"searchEngine.filters.flexibility.title"]]),s("span",{class:x(["badge rounded-pill bg-blue-app-20 text-blue-app fs-12 ms-2",m(p).length>9?"px-1":"px-2"])},y(m(p).length),3)]),s("div",Vt,[(c(),d(b,null,O(n,r=>s("div",Pt,[s("input",{class:"form-check-input",checked:m(p).includes(r),type:"checkbox",id:r,value:r,onClick:_=>f(r)},null,8,Yt),o(s("label",{class:"form-check-label",for:r},null,8,Jt),[[a,`searchEngine.filters.flexibility.${r}`]])])),64))])]),_:1})}}}),Gt={class:"mb-2"},Ht={class:"fs-16 fw-bold"},Wt={class:"btn btn-dropdown ps-3 text-start w-100",type:"button",id:"btn_experience","data-bs-toggle":"dropdown","aria-expanded":"false"},Kt={class:"dropdown-menu w-100","aria-labelledby":"btn_experience"},Xt=["onClick"],Zt={class:"dropdown-item"},es={class:"mb-0"},ts=["onClick"],ss=F(),ns=s("i",{class:"fas fa-times ms-1"},null,-1),is=v({emits:["updateApiQuery"],setup(e,{emit:t}){I();const i=N();let n=D([]);const p=["internships","entry_level","junior","mid_level","senior","expert"],h="experience";if(i.query.experience){let a=[];typeof i.query.experience=="string"?a.push(i.query.experience):a=i.query.experience,n.splice(0,0,...a)}const f=async a=>{let r=Object.assign({},i.query);const _=n.indexOf(a);_===-1?(n.push(a),r[h]=n.toString()):(n.splice(_,1),n.length==0?delete r[h]:r[h]=n.toString()),l()},u=a=>{let r=Object.assign({},i.query);const _=n.indexOf(a);n.splice(_,1),n.length==0?delete r[h]:r[h]=n.toString(),l()},l=async a=>{t("updateApiQuery",h,n)};return(a,r)=>{const _=S("t");return c(),w(C,null,{default:j(()=>[s("p",Gt,[o(s("span",Ht,null,512),[[_,"searchEngine.filters.experience.title"]])]),o(s("button",Wt,null,512),[[_,"searchEngine.filters.select"]]),s("ul",Kt,[(c(),d(b,null,O(p,q=>s("li",{class:"clickable",onClick:T=>f(q)},[o(s("span",Zt,null,512),[[_,`searchEngine.filters.experience.${q}`]])],8,Xt)),64))]),o(s("p",es,[(c(!0),d(b,null,O(m(n),(q,T)=>(c(),d("span",{class:"badge clickable rounded-pill fs-14 me-2 py-2 mt-2 bg-blue-app-20 text-blue-app",key:T,onClick:z=>u(q)},[o(s("span",null,null,512),[[_,`searchEngine.filters.experience.${q}`]]),ss,ns],8,ts))),128))],512),[[g,m(n).length!=0]])]),_:1})}}}),ls=v({components:{FilterLayout:C,SearchableList:Q},data(){return{options:[],filter_name:"languages",filter_objs:[],languages:[],lang:"fr"}},created(){let e=window.localStorage.getItem("userLang");if(e?this.lang=window.localStorage.getItem("userLang"):(e=navigator.language,e.includes("es")?this.lang="es":e.includes("fr")?this.lang="fr":this.lang="en"),this.axios.get("/language/getLanguages").then(t=>{this.options=t.data}),this.$route.query.languages)if(typeof this.$route.query.languages=="string"){const t=[];t.push(this.$route.query.languages),this.languages=t}else this.languages=this.$route.query.languages;this.axios.get("/language/by-ids",{params:{languages:this.languages}}).then(t=>{this.filter_objs=t.data})},methods:{async filter(e){let t=Object.assign({},this.$route.query);const i=this.languages.indexOf(e._id.toString());i===-1?(this.languages.push(e._id.toString()),t[this.filter_name]=this.languages.toString(),this.filter_objs.push(e)):(this.languages.splice(i,1),this.filter_objs=this.filter_objs.filter(n=>n._id!=e._id),this.languages.length==0?delete t[this.filter_name]:t[this.filter_name]=this.languages.toString()),this.$emit("updateApiQuery",this.filter_name,this.languages)}}}),as={class:"mb-2"},rs={class:"fs-16 fw-bold"},os={class:"mb-0"},cs=["onClick"],us=s("i",{class:"fas fa-times ms-1"},null,-1);function ds(e,t,i,n,p,h){const f=k("SearchableList"),u=k("FilterLayout"),l=S("t");return c(),w(u,null,{default:j(()=>[s("p",as,[o(s("span",rs,null,512),[[l,"searchEngine.filters.languages.title"]])]),$(f,{saveObject:!0,options:e.options,requestLevel:[],allItems:[],allItemsSelectable:!1,values:[e.languages],placeholder:e.$t("searchEngine.filters.searchOrSelect"),closeOnSaveSearched:!1,onSelectOption:e.filter,onSelectSearchedOption:e.filter},null,8,["options","values","placeholder","onSelectOption","onSelectSearchedOption"]),o(s("p",os,[(c(!0),d(b,null,O(e.filter_objs,a=>(c(),d("span",{class:"badge clickable rounded-pill fs-14 me-2 py-2 mt-2 bg-blue-app-20 text-blue-app",key:"filter_lang-"+a._id,onClick:r=>e.filter(a)},[o(s("span",null,y(a.name_fr),513),[[g,e.lang=="fr"]]),o(s("span",null,y(a.name_en),513),[[g,e.lang=="en"]]),o(s("span",null,y(a.name_es),513),[[g,e.lang=="es"]]),us],8,cs))),128))],512),[[g,e.filter_objs.length!=0]])]),_:1})}var ps=E(ls,[["render",ds]]);const hs={class:"mb-2"},fs={class:"fs-16 fw-bold"},_s={class:"btn btn-dropdown ps-3 text-start w-100 mb-2",type:"button",id:"btn_currency","data-bs-toggle":"dropdown","aria-expanded":"false"},gs=s("span",null,null,-1),ys={class:"dropdown-menu w-100","aria-labelledby":"btn_currency"},ms=s("span",{class:"dropdown-item"},"Euros (\u20AC) / an",-1),bs=[ms],$s=s("span",{class:"dropdown-item"},"USD ($)",-1),vs=[$s],Ss={class:"input-group mb-2 position-relative"},Os=["placeholder"],ks={class:"position-absolute",style:{right:"15px",top:"50%",transform:"translateY(-50%)"}},qs={class:"my-1"},ws={class:"input-group mb-3 position-relative"},js=["min","placeholder"],As={class:"position-absolute",style:{right:"15px",top:"50%",transform:"translateY(-50%)"}},Cs=v({emits:["updateApiQuery"],setup(e,{emit:t}){I();const i=N();let n=D({currency:"Euro",salary_min:null,salary_max:null});const p=se(()=>n.currency=="Euro"?"\u20AC":"$");i.query.currency&&(n.currency=i.query.currency.toString()),i.query.salary_min&&(n.salary_min=i.query.salary_min.toString()),i.query.salary_max&&(n.salary_max=i.query.salary_max.toString());const h=u=>{n.currency=u,f("currency")},f=async u=>{let l=Object.assign({},i.query);!n[u]||n[u].length==0?delete l[u]:l[u]=n[u],u!="currency"&&t("updateApiQuery","currency",n.currency),t("updateApiQuery",u,n[u])};return(u,l)=>{const a=S("t");return c(),w(C,{hideBorder:!0},{default:j(()=>[s("p",hs,[o(s("span",fs,null,512),[[a,"searchEngine.filters.salary.title"]])]),s("button",_s,[gs,F(" "+y(m(n).currency=="Euro"?"Euros (\u20AC) / an":"USD ($)"),1)]),s("ul",ys,[s("li",{class:"clickable",onClick:l[0]||(l[0]=r=>h("EUR"))},bs),s("li",{class:"clickable",onClick:l[1]||(l[1]=r=>h("USD"))},vs)]),s("div",Ss,[o(s("input",{type:"number",class:"form-control mb-1","onUpdate:modelValue":l[2]||(l[2]=r=>m(n).salary_min=r),onBlur:l[3]||(l[3]=r=>f("salary_min")),placeholder:u.$t("searchEngine.filters.salary.min")},null,40,Os),[[M,m(n).salary_min]]),s("span",ks,y(m(p)),1)]),o(s("p",qs,null,512),[[a,"searchEngine.filters.salary.to"]]),s("div",ws,[o(s("input",{type:"number",class:"form-control mb-1","onUpdate:modelValue":l[4]||(l[4]=r=>m(n).salary_max=r),min:m(n).salary_min?m(n).salary_min:"1000",onBlur:l[5]||(l[5]=r=>f("salary_max")),placeholder:u.$t("searchEngine.filters.salary.max")},null,40,js),[[M,m(n).salary_max]]),s("span",As,y(m(p)),1)])]),_:1})}}});const Ls={id:"search-engine__filters",class:"bg-white p-3 card"},Es={class:"filters__header border-bottom"},Ts={class:"mb-2"},Fs={class:"fs-16 fw-bold ff-nexa"},Is={class:"text-center filters__btn-filter"},Ns={key:0,class:"btn btn-primary w-100"},Ds=s("span",null," 4 204 ",-1),Qs={key:1,class:"btn btn-primary w-100"},Us=v({emits:["updateApiQuery","clearApiQuery"],setup(e,{emit:t}){const i=window.localStorage.getItem("accessToken"),n=(h,f)=>{t("updateApiQuery",h,f)},p=()=>{t("clearApiQuery")};return(h,f)=>{const u=k("i18n-t"),l=S("t");return c(),d("div",Ls,[s("div",Es,[s("p",Ts,[o(s("span",Fs,null,512),[[l,"searchEngine.filters.title"]]),o(s("span",{class:"fs-12 float-end clickable",onClick:p},null,512),[[l,"searchEngine.filters.erase"]])])]),$(be,{onUpdateApiQuery:n}),$(lt,{onUpdateApiQuery:n}),$(ht,{onUpdateApiQuery:n}),$(vt,{onUpdateApiQuery:n}),$(Ct,{onUpdateApiQuery:n}),$(xt,{onUpdateApiQuery:n}),$(zt,{onUpdateApiQuery:n}),$(is,{onUpdateApiQuery:n}),$(ps,{onUpdateApiQuery:n}),$(Cs,{onUpdateApiQuery:n}),s("div",Is,[m(i)?o((c(),d("button",Qs,null,512)),[[l,"searchEngine.filters.save_filters"]]):(c(),d("button",Ns,[$(u,{keypath:"searchEngine.filters.filter"},{cant:j(()=>[Ds]),_:1})]))])])}}});const Rs=v({name:"SearchEngine",components:{MatchOfferCard:ie,Filters:Us},props:{filters:{type:Object,required:!1}},setup(){function e(t){let i=t;return function(n,p){clearTimeout(i),i=setTimeout(()=>{n()},p||500)}}return{debounce:e(null)}},data(){return{matchOfferType:le.Opportunity,joboffers:[],query_api:{sort:"Date"},non_array_properties:["sort","currency","salary_min","salary_max"],can_scroll:!0,page:1}},computed:A(A({},R("auth",["userData","accessToken"])),R("talent",["favoriteData"])),watch:{query_api:{handler:function(e){this.update_url_query(e),this.debounce(this.fetchOffers,3e3)},deep:!0}},created(){this.setLayout("BaseLayout"),this.fetchOffers(),this.getProfileFavorites(),this.getProfileData()},mounted(){if(this.$route.query){const e=this.$route.query;for(const t in e)if(e.hasOwnProperty(t))if(this.non_array_properties.includes(t))this.query_api[t]=e[t];else{let i=[];Array.isArray(e[t])?i=e[t]:i.push(e[t]),this.query_api[t]=i}}},methods:U(A(A(A({},B(["setLayout"])),B("talent",["setFavorites"])),V("talent",["getProfileFavorites","favoriteCount","getProfileData"])),{sort(e){this.query_api.sort=e},update_query_api(e,t){!t||t.length==0?delete this.query_api[e]:this.query_api[e]=t},fetchOffers(){this.axios({method:"get",url:"/api/offer",baseURL:"http://localhost:8080",params:this.query_api}).then(e=>{this.joboffers=e.data}).finally(()=>{const e=document.getElementById("loading");e&&(e.style.display="none")})},openMatch(e){this.$router.push({name:"TalentOpportunity",params:{id:e._id}})},update_url_query(e){this.$router.push({query:e}).catch(t=>{t.name!=="NavigationDuplicated"&&console.log(t)})},clear_api_query(){this.query_api={sort:"Date"},this.update_url_query(this.query_api)},show_more(){this.can_scroll&&(this.page++,this.update_query_api("page",this.page))}})}),xs={class:"container"},Ms={class:"row gx-3"},Bs={class:"col-12 col-lg-9 offset-lg-3 ff-nexa"},Vs={class:"fw-medium mb-2 ff-nexa-bold"},Ps=s("span",null," 4 204 ",-1),Ys={class:"d-flex"},Js={class:"flex-grow-1"},zs={class:"mb-1 pt-1"},Gs={class:""},Hs={class:"row"},Ws={for:"sort",class:"col col-form-label p-0 pt-1"},Ks={class:"col px-0 position-relative"},Xs={class:"btn btn-dropdown ps-3 text-start py-1 bg-transparent text-primary border-0",type:"button",id:"btn_remote","data-bs-toggle":"dropdown","aria-expanded":"false"},Zs={class:"dropdown-menu w-100","aria-labelledby":"btn_remote"},en=s("span",{class:"dropdown-item"},"Date",-1),tn=[en],sn=s("span",{class:"dropdown-item"},"Points ",-1),nn=[sn],ln={class:"col-12 col-lg-3 my-2"},an={class:"col-12 col-lg-9"},rn={class:"d-flex flex-column"},on={key:1,class:"text-center mt-5 fw-medium"};function cn(e,t,i,n,p,h){const f=k("i18n-t"),u=k("Filters"),l=k("MatchOfferCard"),a=S("t");return c(),d("div",xs,[s("div",Ms,[s("div",Bs,[s("p",Vs,[$(f,{keypath:"searchEngine.cantJobs"},{cant:j(()=>[Ps]),_:1})]),s("div",Ys,[s("div",Js,[o(s("p",zs,null,512),[[a,"searchEngine.cantJobs_subtitle"]])]),s("div",Gs,[s("div",Hs,[o(s("label",Ws,null,512),[[a,"searchEngine.sort"]]),s("div",Ks,[s("button",Xs,y(e.query_api.sort),1),s("ul",Zs,[s("li",{class:"clickbale",onClick:t[0]||(t[0]=r=>e.sort("date"))},tn),s("li",{class:"clickbale",onClick:t[1]||(t[1]=r=>e.sort("points"))},nn)])])])])])]),s("div",ln,[$(u,{onUpdateApiQuery:e.update_query_api,onClearApiQuery:e.clear_api_query},null,8,["onUpdateApiQuery","onClearApiQuery"])]),s("div",an,[s("div",rn,[e.joboffers.length>0?(c(),d(b,{key:0},[(c(!0),d(b,null,O(e.joboffers,r=>(c(),w(l,{"match-offer":r,"match-offer-type":e.matchOfferType,class:"my-2 new-opportunity",key:r._id,onClick:_=>e.openMatch(r)},null,8,["match-offer","match-offer-type","onClick"]))),128)),e.can_scroll?o((c(),d("p",{key:0,class:"text-center mt-2 text-decoration-underline clickable",onClick:t[2]||(t[2]=(...r)=>e.show_more&&e.show_more(...r))},null,512)),[[a,"searchEngine.show_more"]]):L("",!0)],64)):o((c(),d("p",on,null,512)),[[a,"searchEngine.not_found"]])])])])])}var un=E(Rs,[["render",cn]]);const dn=v({name:"Opportunities",components:{SearchEngine:un},data(){return{filters:{},loaded:!1}},computed:A({},R("auth",["accessToken"])),beforeCreate(){const e=document.getElementById("loading");e&&(e.style.display="block")},async created(){this.setLayout("BaseLayout"),this.loaded=!0},mounted(){this.accessToken||(this.loaded=!0),console.log("mounted fin")},methods:U(A(A(A({},B(["setLayout"])),V("studies",["getlanguageUser"])),V("aspirations",["getDreams","getLocation","getIndustriesUser"])),{error(e){ne.notify(this.$t("searchEngine.errorGetFilters"),"error",5)},update_url_query(){this.$router.push({query:this.filters}).catch(e=>{e.name!=="NavigationDuplicated"&&console.log(e)})},get_aspirations(){return this.getDreams().then(e=>{var i,n,p,h,f,u;const t=e.data;if(((i=t.jobReference)==null?void 0:i.length)>0&&(this.filters.job_reference=t.jobReference),((n=t.companies)==null?void 0:n.length)>0&&(this.filters.companies=t.companies.replace(/ /g,"")),t.contractType&&t.contractType.meta){const l=[];((p=t.contractType.meta)==null?void 0:p.definiteDuration)=="1"&&l.push("CONTRACT_DEF"),((h=t.contractType.meta)==null?void 0:h.indefiniteDuration)=="1"&&l.push("CONTRACT_INDEF"),((f=t.contractType.meta)==null?void 0:f.freelanceDuration)=="1"&&l.push("CONTRACT_FREE"),((u=t.contractType.meta)==null?void 0:u.partialDuration)=="1"&&l.push("CONTRACT_PART"),l.length>0&&(this.filters.contract=l.toString())}t.YearFixedAnualMoneda&&(this.filters.currency=t.YearFixedAnualMoneda),t.YearFixedAnualMax&&(this.filters.salary_max=t.YearFixedAnualMax),t.YearFixedAnualMin&&(this.filters.salary_min=t.YearFixedAnualMin)}).catch(this.error)},get_languages(){return this.getlanguageUser().then(e=>{e.data.length>0&&(this.filters.languages=e.data.map(t=>t.id).toString())})},get_industries_user(){return this.getIndustriesUser().then(e=>{e.data.length>0&&(this.filters.industries=e.data.map(t=>t.id).toString())}).catch(this.error)},get_locations(){return this.getLocation().then(e=>{const t=e.data;t.continents&&(this.filters.continents=t.continents.toString()),t.countries&&(this.filters.countries=t.countries.toString()),t.regions&&(this.filters.regions=t.regions.toString()),t.cities&&(this.filters.cities=t.cities.toString())}).catch(this.error)}})}),pn={id:"opportunities"},hn={key:0,class:"container"},fn={class:"row gx-3"},_n={class:"text-center text-white pb-2 mb-5 ff-nexa-bold fs-48"};function gn(e,t,i,n,p,h){const f=k("search-engine"),u=S("t");return c(),d("div",pn,[e.accessToken?L("",!0):(c(),d("div",hn,[s("div",fn,[o(s("h2",_n,null,512),[[u,"searchEngine.title"]])])])),e.loaded?(c(),w(f,{key:1})):L("",!0)])}var qn=E(dn,[["render",gn]]);export{qn as default};
