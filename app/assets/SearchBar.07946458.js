import{d as q,as as E,ap as Y,ad as k,ae as $,ah as Z,ai as T,e as O,o as i,f as d,i as s,h as r,t as x,ao as n,ar as R,au as M,av as U,ab as j,ac as C,k as z,n as ee,s as D,aw as se,ax as te,y as F,am as oe,g as ae}from"./vendor.c408dfb7.js";import{D as le}from"./bootstrap.esm.5b5e0dd6.js";import{S as J}from"./simplebar.347723c8.js";import{a as ne}from"./index.502c7d60.js";const B=f=>(se("data-v-53d40946"),f=f(),te(),f),re={id:"search-bar",class:"w-100 bg-white border-0 p-3 rounded-12 fs-14"},ce={class:"row"},ie={class:"col-12 col-md-11 row"},de={class:"col-12 col-md-4"},_e={class:"fw-medium mb-2"},ue={class:"position-relative"},me={id:"btn_search",class:"btn btn-dropdown ps-3 text-start w-100 fs-14 right-bar search-bar__dropdown-toggle",type:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false"},pe={class:"dropdown-menu","aria-labelledby":"btn_search"},he={class:"mb-1"},fe=D(),be=B(()=>s("br",null,null,-1)),ve={class:"fs-10"},ge={class:"mb-1"},we=D(),ye=B(()=>s("br",null,null,-1)),Se={class:"fs-10"},ke={class:"mb-1"},je=D(),Be=B(()=>s("br",null,null,-1)),$e={class:"fs-10"},xe={class:"col-12 col-md-4"},Ce={class:"position-relative"},De={class:"fw-medium mb-2"},Le={class:"position-relative right-bar"},Ve=["placeholder","disabled"],Ae={class:"position-absolute custom-scroll w-100"},Ie={key:0,class:"position-relative"},Ne={class:"dropdown-menu w-100 show","aria-labelledby":"btn_search"},qe=["onClick"],Ee={class:"col-12 col-md-4"},Te={class:"position-relative"},Oe={class:"fw-medium mb-2"},Re=["placeholder"],Me={class:"position-absolute custom-scroll w-100"},Ue={key:0,class:"position-relative"},ze={class:"dropdown-menu w-100 show","aria-labelledby":"btn_search"},Fe=["onClick"],Je={class:"col-12 col-md-1 d-flex align-items-end pb-1"},Ge=B(()=>s("i",{class:"fas fa-search fs-20 align-middle"},null,-1)),He=[Ge],Ke=q({setup(f){const S=E();Y();const b=k(null),_=k(null);let o=$({remote:"",location:{name:"",model:"",id:""},job_reference:{name:"",id:""}}),h=window.localStorage.getItem("userLang"),u="";h?u=h:(h=navigator.language,h.includes("es")?u="es":h.includes("fr")?u="fr":u="en"),Z(()=>{const e=[].slice.call(document.querySelectorAll(".search-bar__dropdown-toggle"));console.log(e),e.map(function(t){return new le(t)})});const L=T(()=>o.remote=="nomad"&&o.job_reference.id!=""||o.remote!=""&&o.location.id!=""&&o.job_reference.id!=""),G=()=>{var e;o.remote="nomad",o.location.name="",o.location.id="",_.value&&((e=_.value)==null||e.focus())},V=e=>{var t;o.remote=e,b.value&&((t=b.value)==null||t.focus())};let m=k(""),v=$([]);const H=()=>{const e=`locations/searchLocation/${m.value}`;v.splice(0),m.value.length>2&&F.get(e,{params:{lang:u}}).then(t=>{const a=t.data;v.push(...a)}).then(()=>{Array.prototype.forEach.call(document.querySelectorAll(".custom-scroll"),t=>new J(t))})},K=(e,t)=>{var w,l,c,y;let a="";return t==0?a=`${(l=(w=e==null?void 0:e.region)==null?void 0:w.country)==null?void 0:l.name}, ${(c=e==null?void 0:e.region)==null?void 0:c.name}, ${e==null?void 0:e.name}`:t==1?a=`${(y=e==null?void 0:e.country)==null?void 0:y.name}, ${e==null?void 0:e.name}`:a=e==null?void 0:e.name,a},A=()=>{m.value="",v.splice(0)},P=(e,t)=>{var a;o.location.name=e.name,o.location.id=e._id,t==0?o.location.model="cities":t==1?o.location.model="regions":t==2?o.location.model="countries":t==3&&(o.location.model="continents"),A(),_.value&&((a=_.value)==null||a.focus())};let p=k(""),g=$([]);const Q=()=>{const e=`job-reference/searchJobreference/${p.value}`;g.splice(0),p.value.length>2&&F.get(e,{params:{lang:u}}).then(t=>{const a=t.data;g.push(...a)}).then(()=>{Array.prototype.forEach.call(document.querySelectorAll(".custom-scroll"),t=>new J(t))})},I=e=>{let t="";return u=="fr"?t=e.name_fr:u=="es"?t=e.name_es:t=e.name_en,t},N=()=>{p.value="",g.splice(0)},W=e=>{o.job_reference.name=I(e),o.job_reference.id=e._id,N()},X=()=>{if(L.value){const e={};o.remote!=""&&(e.remote=o.remote),o.job_reference.id!=""&&(e.job_reference=o.job_reference.id),o.location.id!=""&&o.location.model!=""&&(e[o.location.model]=o.location.id),S.push({name:"TalentOpportunities",query:e})}};return(e,t)=>{const a=O("t"),w=O("debounce");return i(),d("div",re,[s("div",ce,[s("div",ie,[s("div",de,[r(s("p",_e,null,512),[[a,"SearchBar.remote.title"]]),s("div",ue,[s("button",me,x(n(o).remote==""?e.$t("SearchBar.remote.select"):e.$t(`SearchBar.remote.${n(o).remote}_title`)),1),s("ul",pe,[s("li",{class:"clickable break-spaces dropdown-item fs-14 mb-1",onClick:t[0]||(t[0]=l=>V("full_remote"))},[r(s("span",he,null,512),[[a,"SearchBar.remote.full_remote_title"]]),fe,be,r(s("span",ve,null,512),[[a,"SearchBar.remote.full_remote_sub-title"]])]),s("li",{class:"clickable break-spaces dropdown-item fs-14 mb-1",onClick:t[1]||(t[1]=l=>V("hybrid"))},[r(s("span",ge,null,512),[[a,"SearchBar.remote.hybrid_title"]]),we,ye,r(s("span",Se,null,512),[[a,"SearchBar.remote.hybrid_sub-title"]])]),s("li",{class:"clickable break-spaces dropdown-item fs-14 mb-1",onClick:G},[r(s("span",ke,null,512),[[a,"SearchBar.remote.nomad_title"]]),je,Be,r(s("span",$e,null,512),[[a,"SearchBar.remote.nomad_sub-title"]])])])])]),s("div",xe,[s("div",Ce,[r(s("p",De,null,512),[[a,"SearchBar.location.title"]]),s("div",Le,[r(s("input",{type:"text",id:"location-search",ref:(l,c)=>{c.location_input=l,b.value=l},"onUpdate:modelValue":t[2]||(t[2]=l=>M(m)?m.value=l:m=l),style:{"padding-top":"12px","padding-bottom":"12px"},class:"form-control searchable-list__input",placeholder:n(o).location.name==""?e.$t("SearchBar.location.select"):n(o).location.name,disabled:n(o).remote=="nomad"},null,8,Ve),[[R,n(m)],[w,H,"500ms"]])]),s("div",Ae,[n(v).length>0?r((i(),d("div",Ie,[s("ul",Ne,[(i(!0),d(j,null,C(n(v),(l,c)=>(i(),d(j,null,[(i(!0),d(j,null,C(l,y=>(i(),d("li",{class:"clickable break-spaces dropdown-item fs-14 mb-0",onClick:Ye=>P(y,c)},[s("span",null,x(K(y,c)),1)],8,qe))),256))],64))),256))])],512)),[[n(U.exports.directive),A]]):z("",!0)])])]),s("div",Ee,[s("div",Te,[r(s("p",Oe,null,512),[[a,"SearchBar.job_reference.title"]]),r(s("input",{type:"text",id:"job_reference-search",ref:(l,c)=>{c.job_reference_input=l,_.value=l},"onUpdate:modelValue":t[3]||(t[3]=l=>M(p)?p.value=l:p=l),style:{"padding-top":"12px","padding-bottom":"12px"},class:"form-control searchable-list__input",placeholder:n(o).job_reference.name==""?e.$t("SearchBar.job_reference.select"):n(o).job_reference.name},null,8,Re),[[R,n(p)],[w,Q,"500ms"]]),s("div",Me,[n(g).length>0?r((i(),d("div",Ue,[s("ul",ze,[(i(!0),d(j,null,C(n(g),l=>(i(),d("li",{class:"clickable break-spaces dropdown-item fs-14 mb-0",onClick:c=>W(l)},[s("span",null,x(I(l)),1)],8,Fe))),256))])],512)),[[n(U.exports.directive),N]]):z("",!0)])])])]),s("div",Je,[s("button",{type:"button",class:ee(["btn text-white bg-green-app w-100 px-2 py-2",{disabled:!n(L)}]),onClick:X},He,2)])])])}}});var Pe=ne(Ke,[["__scopeId","data-v-53d40946"]]);const Qe={id:"searh_bar_page",class:"container"},We={class:"row mt-15"},Xe={class:"col-12 col-md-12 offset-md-1"},os=q({setup(f){const S=oe(),b=E();S.commit("setLayout","BaseLayout");const _=T(()=>S.state.auth.userData);return _.value.filters&&_.value.filters.length>0&&b.push({name:"TalentOpportunities"}),(o,h)=>(i(),d("div",Qe,[s("div",We,[s("div",Xe,[ae(Pe)])])]))}});export{os as default};
